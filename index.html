<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å‰å°å¿«æ·å·¥å…· By Alan</title>
<style>
    :root { --primary: #4a90e2; --hover: #3a7bc8; --bg: #f5f5f5; --txt: #333; --txt-sec: #666; --err: #e74c3c; }
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
    body { background-color: var(--bg); display: flex; justify-content: center; align-items: center; min-height: 100vh; padding: 20px; }
    .container { background: white; border-radius: 12px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); padding: 30px; width: 100%; max-width: 600px; }
    h1 { color: var(--txt); text-align: center; margin-bottom: 25px; font-weight: 600; display: flex; justify-content: center; align-items: baseline; gap: 8px; }
    .title-main { font-size: 28px; }
    .title-by { font-size: 18px; color: var(--txt-sec); font-weight: 500; }
    .section-title { font-size: 22px; color: var(--primary); margin: 25px 0 15px; padding-bottom: 8px; border-bottom: 2px solid #eaeaea; }
    .country-title { margin-top: 35px; }
    .input-group { margin-bottom: 20px; }
    label { display: block; margin-bottom: 8px; color: #555; font-weight: 500; }
    .date-input-container { position: relative; display: flex; }
    .date-input-container input[type="text"] { flex: 1; padding-right: 50px; }
    .date-input-container input[type="date"] { position: absolute; right: 0; width: 50px; height: 100%; opacity: 0; cursor: pointer; z-index: 2; }
    .date-input-container::after { content: " ğŸ“… "; position: absolute; right: 15px; top: 50%; transform: translateY(-50%); pointer-events: none; font-size: 18px; z-index: 1; }
    input { width: 100%; padding: 12px 15px; border: 1px solid #ddd; border-radius: 6px; font-size: 16px; transition: 0.3s; }
    input:focus { border-color: var(--primary); outline: none; box-shadow: 0 0 0 2px rgba(74, 144, 226, 0.2); }
    .result-group { margin-top: 30px; background: #f9f9f9; padding: 20px; border-radius: 8px; border-left: 4px solid var(--primary); }
    .result-label { font-weight: 500; color: #555; margin-bottom: 10px; }
    .result { font-size: 22px; color: var(--txt); font-weight: 600; }
    .result-details, .date-hint, .error, .manual-label { font-size: 14px; color: var(--txt-sec); }
    .date-hint { font-size: 12px; color: #888; margin-top: 5px; }
    .error { color: var(--err); display: none; margin-top: 5px; }
    .example { background: #f0f7ff; padding: 15px; border-radius: 6px; margin-top: 20px; font-size: 14px; color: #555; }
    
    /* æŒ‰é’®é€šç”¨æ ·å¼ */
    button { cursor: pointer; border: none; border-radius: 6px; transition: 0.2s; font-size: 16px; }
    .calculate-btn, .search-btn { background: var(--primary); color: white; padding: 12px 20px; width: 100%; margin-top: 10px; }
    .calculate-btn:hover, .search-btn:hover { background: var(--hover); }
    
    .quick-days { display: flex; gap: 8px; margin-bottom: 15px; }
    .quick-day-btn { flex: 1; background: #7bb0ee; color: white; padding: 12px 5px; font-weight: 600; }
    .quick-day-btn:hover { background: #6ba0de; }
    .quick-day-btn.active { background: #5b90ce; box-shadow: 0 0 0 2px rgba(91, 144, 206, 0.3); }
    
    .manual-input-container { margin-top: 10px; }
    .manual-input, .country-search-container { display: flex; gap: 10px; }
    .manual-input input, .country-search-container input { flex: 1; }
    .manual-input button, .country-search-container button, .today-btn, .show-all-countries { flex: 0 0 auto; background: #f0f0f0; color: #333; }
    .country-search-container button { background: #7bb0ee; color: white; padding: 0 20px; }
    .country-search-container button:hover { background: #6ba0de; }
    .manual-input button { padding: 0 20px; }
    .today-btn { padding: 6px 10px; font-size: 12px; margin-top: 5px; }
    .show-all-container { text-align: right; margin-bottom: 15px; }
    .show-all-countries { padding: 6px 12px; font-size: 13px; }
    .manual-input button:hover, .today-btn:hover, .show-all-countries:hover { background: #e0e0e0; }

    .country-results { margin-top: 15px; max-height: 300px; overflow-y: auto; border: 1px solid #eaeaea; border-radius: 6px; padding: 10px; }
    .country-results-header { font-size: 14px; color: var(--txt-sec); margin-bottom: 10px; padding-bottom: 5px; border-bottom: 1px solid #f0f0f0; }
    .country-item { padding: 10px; border-bottom: 1px solid #f0f0f0; display: flex; justify-content: space-between; align-items: center; }
    .country-item:last-child { border-bottom: none; }
    .country-name { font-weight: 500; }
    .country-code { color: var(--primary); background: #f0f7ff; padding: 4px 8px; border-radius: 4px; font-weight: 600; border: 1px solid #c5d9f1; font-size: 15px; }
    .no-results { text-align: center; color: #888; padding: 20px; }
    .footer { text-align: center; margin-top: 25px; color: #777; font-size: 14px; border-top: 1px solid #eee; padding-top: 15px; }
    .copyright { font-weight: 500; color: #555; }
</style>
</head>
<body>
<div class="container">
    <h1><span class="title-main">å‰å°å¿«æ·å·¥å…·</span><span class="title-by">By Alan</span></h1>
    
    <div class="section-title">å…¥å¢ƒæœ‰æ•ˆæœŸè®¡ç®—</div>
    <div class="input-group">
        <label for="startDate">å…¥å¢ƒæ—¥æœŸ</label>
        <div class="date-input-container">
            <input type="text" id="startDate" placeholder="å¦‚ï¼š2023/10/01 æˆ– 2023-10-01">
            <input type="date" id="startDatePicker">
        </div>
        <div class="date-hint">æ”¯æŒæ ¼å¼ï¼šYYYY/MM/DD, YYYY-MM-DD, YYYYå¹´MMæœˆDDæ—¥</div>
        <button class="today-btn" id="todayBtn">è®¾ä¸ºä»Šå¤©</button>
        <div class="error" id="dateError">è¯·è¾“å…¥æœ‰æ•ˆçš„æ—¥æœŸ</div>
    </div>
    
    <div class="input-group">
        <label for="daysToAdd">åœç•™å¤©æ•°</label>
        <div class="quick-days">
            <button class="quick-day-btn" data-days="30">30å¤©</button>
            <button class="quick-day-btn" data-days="60">60å¤©</button>
            <button class="quick-day-btn" data-days="90">90å¤©</button>
            <button class="quick-day-btn" data-days="120">120å¤©</button>
            <button class="quick-day-btn" data-days="180">180å¤©</button>
        </div>
        <div class="manual-input-container">
            <span class="manual-label">æ‰‹åŠ¨è¾“å…¥</span>
            <div class="manual-input">
                <input type="number" id="daysToAdd" min="1" placeholder="è¾“å…¥å…¶ä»–å¤©æ•°">
                <button id="manualCalculateBtn">è®¡ç®—</button>
            </div>
        </div>
        <div class="error" id="daysError">è¯·è¾“å…¥æœ‰æ•ˆçš„å¤©æ•°ï¼ˆâ‰¥1ï¼‰</div>
    </div>
    
    <div class="result-group">
        <div class="result-label">è®¡ç®—ç»“æœ</div>
        <div class="result" id="result">è¯·è¾“å…¥å…¥å¢ƒæ—¥æœŸå’Œåœç•™å¤©æ•°è¿›è¡Œè®¡ç®—</div>
        <div class="result-details" id="resultDetails"></div>
    </div>
    
    <div class="example">
        <strong>ç¤ºä¾‹ï¼š</strong><br>å…¥å¢ƒæ—¥æœŸï¼š2023/10/01ï¼Œåœç•™å¤©æ•°ï¼š30<br>è®¡ç®—ç»“æœï¼š2023/10/31ï¼ˆæœ‰æ•ˆæœŸè‡³ï¼‰
    </div>
    
    <div class="section-title country-title">å…ç­¾å›½å®¶æŸ¥è¯¢ï¼ˆ77+2ï¼‰</div>
    <div class="country-search-container">
        <input type="text" id="countrySearch" placeholder="è¾“å…¥å›½å®¶åç§°æˆ–ä»£ç ï¼Œå¦‚ï¼šæ³°å›½ æˆ– THA">
        <button id="searchBtn">æŸ¥æ‰¾</button>
    </div>
    <div class="show-all-container">
        <button class="show-all-countries" id="showAllBtn">æ˜¾ç¤ºå…¨éƒ¨å…ç­¾å›½å®¶</button>
    </div>
    <div class="country-results" id="countryResults">
        <div class="country-results-header">è¯·è¾“å…¥å…³é”®è¯è¿›è¡ŒæŸ¥è¯¢æˆ–ç‚¹å‡»"æ˜¾ç¤ºå…¨éƒ¨å…ç­¾å›½å®¶"</div>
    </div>
    
    <div class="footer">
        <div class="copyright">ä¸Šæµ·å’Œå¹³é¥­åº—Â©ï¸2025</div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    const $ = id => document.getElementById(id);
    const els = {
        sDate: $('startDate'), sPicker: $('startDatePicker'), days: $('daysToAdd'),
        calcBtn: $('manualCalculateBtn'), res: $('result'), resDet: $('resultDetails'),
        dErr: $('dateError'), dayErr: $('daysError'), today: $('todayBtn'),
        search: $('countrySearch'), sBtn: $('searchBtn'), showAll: $('showAllBtn'),
        cRes: $('countryResults'), qBtns: document.querySelectorAll('.quick-day-btn')
    };
    
    // æ›´æ–°åçš„å›½å®¶æ•°æ®ï¼Œè¿½åŠ äº†æœé²œå’Œè’™å¤
    const countryData = "æ–‡è±,BRN|æ³•å›½,FRA|å¾·å›½,DEU|æ„å¤§åˆ©,ITA|è¥¿ç­ç‰™,ESP|è·å…°,NLD|ç‘å£«,CHE|çˆ±å°”å…°,IRL|åŒˆç‰™åˆ©,HUN|å¥¥åœ°åˆ©,AUT|æ¯”åˆ©æ—¶,BEL|å¢æ£®å ¡,LUX|æ–°è¥¿å…°,NZL|æ¾³å¤§åˆ©äºš,AUS|æ³¢å…°,POL|è‘¡è„ç‰™,PRT|å¸Œè…Š,GRC|å¡æµ¦è·¯æ–¯,CYP|æ–¯æ´›æ–‡å°¼äºš,SVN|æ–¯æ´›ä¼å…‹,SVK|æŒªå¨,NOR|èŠ¬å…°,FIN|ä¸¹éº¦,DNK|å†°å²›,ISL|å®‰é“å°”,AND|æ‘©çº³å“¥,MCO|åˆ—æ”¯æ•¦å£«ç™»,LIE|éŸ©å›½,KOR|ä¿åŠ åˆ©äºš,BGR|ç½—é©¬å°¼äºš,ROU|å…‹ç½—åœ°äºš,HRV|é»‘å±±,MNE|åŒ—é©¬å…¶é¡¿,MKD|é©¬è€³ä»–,MLT|çˆ±æ²™å°¼äºš,EST|æ‹‰è„±ç»´äºš,LVA|æ—¥æœ¬,JPN|å·´è¥¿,BRA|é˜¿æ ¹å»·,ARG|æ™ºåˆ©,CHL|ç§˜é²,PER|ä¹Œæ‹‰åœ­,URY|æ²™ç‰¹,SAU|é˜¿æ›¼,OMN|ç§‘å¨ç‰¹,KWT|å·´æ—,BHR|é˜¿å°”å·´å°¼äºš,ALB|é˜¿è”é…‹,ARE|å®‰æç“œå’Œå·´å¸ƒè¾¾,ATG|å·´å·´å¤šæ–¯,BRB|å·´å“ˆé©¬,BHS|ç™½ä¿„ç½—æ–¯,BLR|æ³¢é»‘,BIH|å¤šç±³å°¼å…‹,DMA|å„ç“œå¤šå°”,ECU|æ–æµ,FJI|æ ¼æ—çº³è¾¾,GRD|æ ¼é²å‰äºš,GEO|å“ˆè¨å…‹æ–¯å¦,KAZ|å¡å¡”å°”,QAT|é©¬å°”ä»£å¤«,MDV|æ¯›é‡Œæ±‚æ–¯,MUS|è¨æ‘©äºš,WSM|å¡å°”ç»´äºš,SRB|å¡èˆŒå°”,SYC|åœ£é©¬åŠ›è¯º,SMR|è‹é‡Œå—,SUR|æ‰€ç½—é—¨ç¾¤å²›,SLB|æ³°å›½,THA|æ±¤åŠ ,TON|ä¹Œå…¹åˆ«å…‹æ–¯å¦,UZB|æ–°åŠ å¡,SGP|äºšç¾å°¼äºš,ARM|é˜¿å¡æ‹œç–†,AZE|é©¬æ¥è¥¿äºš,MYS|ç‘å…¸,SWE|ä¿„ç½—æ–¯,RUS|æœé²œï¼ˆå› å…¬æ™®é€šæŠ¤ç…§ï¼‰,PRK|è’™å¤ï¼ˆå› å…¬æ™®é€šæŠ¤ç…§ï¼‰,MNG";
    const countries = countryData.split('|').map(s => { const [name, code] = s.split(','); return { name, code }; });

    // æ—¥æœŸå·¥å…·
    const fmt = (d, type = '/') => {
        const y = d.getFullYear(), m = String(d.getMonth()+1).padStart(2,'0'), da = String(d.getDate()).padStart(2,'0');
        return type === '/' ? `${y}/${m}/${da}` : `${y}-${m}-${da}`;
    };
    
    const parse = (str) => {
        if(!str) return null;
        // ç»Ÿä¸€æ ¼å¼ï¼šå°†å¹´æœˆæ—¥ã€æ¨ªæ éƒ½æ›¿æ¢ä¸ºæ–œæ ï¼Œç„¶åè§£æ
        const clean = str.replace(/[å¹´æœˆæ—¥-]/g, '/');
        const d = new Date(clean);
        return isNaN(d.getTime()) ? null : d;
    };

    const setToday = () => {
        const now = new Date();
        els.sDate.value = fmt(now);
        els.sPicker.value = fmt(now, '-');
    };
    
    const clearQuick = () => els.qBtns.forEach(b => b.classList.remove('active'));

    const calc = () => {
        els.dErr.style.display = els.dayErr.style.display = 'none';
        const d = parse(els.sDate.value);
        const days = parseInt(els.days.value);
        
        if (!d) return els.dErr.style.display = 'block';
        if (isNaN(days) || days < 1) return els.dayErr.style.display = 'block';

        const newDate = new Date(d);
        newDate.setDate(d.getDate() + days);
        els.res.innerHTML = `<div>${fmt(newDate)}</div>`;
        els.resDet.innerHTML = `<div>ï¼ˆæœ‰æ•ˆæœŸè‡³ï¼Œä» ${fmt(d)} èµ·ç®— ${days} å¤©ï¼‰</div>`;
    };

    // äº‹ä»¶ç›‘å¬
    setToday();
    els.today.addEventListener('click', setToday);
    
    els.qBtns.forEach(btn => btn.addEventListener('click', function() {
        clearQuick();
        this.classList.add('active');
        els.days.value = this.dataset.days;
        calc();
    }));

    els.sPicker.addEventListener('change', function() { els.sDate.value = fmt(new Date(this.value)); });
    els.sDate.addEventListener('change', function() { const d = parse(this.value); if(d) els.sPicker.value = fmt(d, '-'); });
    
    [els.calcBtn, els.days].forEach(el => {
        el.addEventListener(el === els.days ? 'keypress' : 'click', e => {
            if (e.type === 'click' || e.key === 'Enter') {
                clearQuick();
                calc();
            }
        });
    });

    // å›½å®¶æŸ¥è¯¢é€»è¾‘
    const renderCountries = list => {
        if (!list.length) return els.cRes.innerHTML = '<div class="country-results-header">ä»¥ä¸‹æ˜¯æœç´¢åˆ°çš„å…ç­¾å›½å®¶ï¼š</div><div class="no-results">æœªæ‰¾åˆ°åŒ¹é…çš„å›½å®¶</div>';
        const html = list.map(c => `<div class="country-item"><span class="country-name">${c.name}</span><span class="country-code">${c.code}</span></div>`).join('');
        els.cRes.innerHTML = `<div class="country-results-header">ä»¥ä¸‹æ˜¯æœç´¢åˆ°çš„å…ç­¾å›½å®¶ï¼š</div>${html}`;
    };

    const search = () => {
        const term = els.search.value.trim().toLowerCase();
        if (!term) return els.cRes.innerHTML = '<div class="country-results-header">è¯·è¾“å…¥å…³é”®è¯è¿›è¡ŒæŸ¥è¯¢æˆ–ç‚¹å‡»"æ˜¾ç¤ºå…¨éƒ¨å…ç­¾å›½å®¶"</div>';
        renderCountries(countries.filter(c => c.name.includes(term) || c.code.toLowerCase().includes(term)));
    };

    els.sBtn.addEventListener('click', search);
    els.showAll.addEventListener('click', () => renderCountries(countries));
    els.search.addEventListener('keypress', e => e.key === 'Enter' && search());
});
</script>
</body>
</html>
